<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Results - Student Portal</title>
    <link rel="stylesheet" href="global.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <header>
        <div class="logo"><a href="index.html">Mitaboni Boys High School</a></div>
        <nav>
            <ul class="nav-list">
                <li><a href="fee.html">Fees</a></li>
                <li><a href="assignment.html">Assignments</a></li>
                <li><a href="result.html" class="active">Results</a></li>
                <li><a href="attendance.html">Attendance</a></li>
                <li><a href="callender.html">Calender</a></li>
            
                <li><a href="/main.html">Portal</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero-small">
        <h1>ðŸ§® Student Results</h1>
        <p> Your current term performance and trend.</p>
    </section>

    <section class="results-section">
        <h2>My Results</h2>
        <table>
            <thead>
                <tr>
                    <th>Subject</th>
                    <th>Term 1</th>
                    <th>Term 2</th>
                    <th>Term 3</th>
                    <th>Average</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Math</td>
                    <td>82%</td>
                    <td>85%</td>
                    <td>88%</td>
                    <td>85%</td>
                </tr>
                <tr>
                    <td>English</td>
                    <td>74%</td>
                    <td>78%</td>
                    <td>80%</td>
                    <td>77%</td>
                </tr>
                <tr>
                    <td>Kiswahili</td>
                    <td>68%</td>
                    <td>50%</td>
                    <td>82%</td>
                    <td>70%</td>
                </tr>
                <tr>
                    <td>Biology</td>
                    <td>38%</td>
                    <td>90%</td>
                    <td>12%</td>
                    <td>67%</td>
                </tr>
                <tr>
                    <td>Physics</td>
                    <td>77%</td>
                    <td>60%</td>
                    <td>32%</td>
                    <td>70%</td>
                </tr>
                <tr>
                    <td>History</td>
                    <td>78%</td>
                    <td>50%</td>
                    <td>48%</td>
                    <td>59%</td>
                </tr>
                <tr>
                    <td>Geography</td>
                    <td>88%</td>
                    <td>90%</td>
                    <td>92%</td>
                    <td>90%</td>
                </tr>
                <tr>
                    <td>Cre</td>
                    <td>88%</td>
                    <td>90%</td>
                    <td>92%</td>
                    <td>90%</td>
                </tr>
            </tbody>
        </table>

        <h3>ðŸ“Š Average Score </h3>
        <canvas id="resultsChart"></canvas>

        <h3>ðŸ“ˆ Termly Performance Trend</h3>
        <canvas id="termTrendChart" style="width: 100%; max-width: 1200px; height: 600px;"></canvas>>



        <script>
            // --- Horizontal Bar Chart ---
            const ctx = document.getElementById('resultsChart').getContext('2d');

            const subjects = ["Math", "English", "Kiswahili", "Biology", "Physics", "History", "Geography", "Cre"];
            const averages = [85, 77, 70, 67, 70, 59, 90, 90]; // corrected History average

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: subjects,
                    datasets: [{
                        label: "Average Score",
                        data: averages,
                        backgroundColor: ["#4CAF50", "#FFC107", "#03A9F4", "#E91E63", "#9C27B0", "#FF5722", "#009688", "#795548"],
                        borderRadius: 8,
                        barPercentage: 0.6
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { label: ctx => ctx.parsed.x + "%" } }
                    },
                    scales: {
                        x: { beginAtZero: true, max: 100, title: { display: true, text: "Percentage (%)" } },
                        y: { title: { display: true, text: "Subjects" } }
                    }
                }
            });

            // --- Termly Trend Line Chart ---
            const termLabels = ["Term 1", "Term 2", "Term 3"];
            const subjectScores = {
                "Math": [82, 85, 88],
                "English": [74, 78, 80],
                "Kiswahili": [68, 50, 82],
                "Biology": [38, 90, 12],
                "Physics": [77, 60, 32],
                "History": [78, 50, 48],
                "Geography": [88, 90, 92],
                "Cre": [88, 90, 92]
            };
            const colors = ["#4CAF50", "#FFC107", "#03A9F4", "#E91E63", "#9C27B0", "#FF5722", "#009688", "#795548"];

            const ctxTrend = document.getElementById("termTrendChart").getContext("2d");

            new Chart(ctxTrend, {
                type: 'bar',
                data: {
                    labels: termLabels,
                    datasets: Object.keys(subjectScores).map((sub, i) => ({
                        label: sub,
                        data: subjectScores[sub],
                        borderColor: colors[i],
                        backgroundColor: colors[i] + "88",
                        tension: 0.3,
                        fill: true,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }))
                },
                options: {
                    responsive: true,
                    plugins: { legend: { position: "top" }, tooltip: { enabled: true } },
                    scales: {
                        y: { beginAtZero: true, max: 100, title: { display: true, text: "Score (%)" } },
                        x: { title: { display: true, text: "Term" } }
                    }
                }
            });
        </script>
    </section>
     <footer class="footer">Â© 2025 Mitaboni Boys High School</footer>
</body>

</html>
